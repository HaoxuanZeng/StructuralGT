<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Adding C++ Scripts &#8212; StructuralGT 2.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=039e1c02" />
    <script src="../_static/documentation_options.js?v=60dbed4a"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="How to cite StructuralGT" href="cite.html" />
    <link rel="prev" title="Interaction Networks" href="../networks/interaction_networks.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="adding-c-scripts">
<h1>Adding C++ Scripts<a class="headerlink" href="#adding-c-scripts" title="Link to this heading">¶</a></h1>
<p><strong>StructuralGT</strong> aims to offer optimized graph theoretic analysis code combined with the python ecosystem. For the most part, graph theoretic algorithms are made available, on the python side, via access to the <code class="xref py py-class docutils literal notranslate"><span class="pre">igraph.Graph</span></code> attribute of every <code class="xref py py-class docutils literal notranslate"><span class="pre">Network</span></code> class. Calling methods of the <code class="xref py py-attr docutils literal notranslate"><span class="pre">Graph</span></code> attribute calls an optimized C routine, implemented in <a class="reference external" href="https://igraph.org/">igraph</a>. This section is for users who want to implement their own graph theoretic calculations in C++ and combine them with analysis in python. A few of these routines have already been implemented in <strong>StrucutralGT</strong>, and can be used as templates. They are made possible because the igraph library allows the user to access the pointer to the underlying C++ <code class="code docutils literal notranslate"><span class="pre">igraph_t</span></code> object. To leverage this in your own code, the following are generally required:</p>
<section id="python-wrapper-method">
<h2>Python Wrapper Method<a class="headerlink" href="#python-wrapper-method" title="Link to this heading">¶</a></h2>
<p>This is the called by the user and should be a method of a <code class="xref py py-class docutils literal notranslate"><span class="pre">Network</span></code> subclass. For example, <code class="xref py py-meth docutils literal notranslate"><span class="pre">average_nodal_connectivity()</span></code> is a method of <code class="xref py py-class docutils literal notranslate"><span class="pre">StruturalNetwork</span></code>. These methods should create a deep copy of the graph, to pass to the C++ script. The graph is passed to the C++ script via its pointer, which can be accessed from igraph’s <code class="xref py py-meth docutils literal notranslate"><span class="pre">_raw_pointer()</span></code> method.</p>
</section>
<section id="cython-module">
<h2>Cython Module<a class="headerlink" href="#cython-module" title="Link to this heading">¶</a></h2>
<p>All graph pointers are passed to a C++ script via a cython module, which takes the same name as the python wrapper method which generated it, except with a preceding underscore and leading <code class="code docutils literal notranslate"><span class="pre">cast</span></code> label, e.g. <code class="code docutils literal notranslate"><span class="pre">_average_nodal_connectivity_cast</span></code>. This module is defined in its corresponding <code class="code docutils literal notranslate"><span class="pre">.pyx</span></code> file. Although the <code class="code docutils literal notranslate"><span class="pre">.pyx</span></code> may vary depending on the module, they have a few things in common. Namely, in these files, a cython extension type which holds a C++ instance as an attribute is created. The cython extension type is called <code class="code docutils literal notranslate"><span class="pre">PyCast</span></code> and its C++ instance is called <code class="code docutils literal notranslate"><span class="pre">c_cast</span></code>. Finally, the C++ instance holds the graph’s pointer as an attribute, called <code class="code docutils literal notranslate"><span class="pre">G_ptr</span></code>. This pointer may be accessed from a C++ script, via <code class="code docutils literal notranslate"><span class="pre">c_cast</span></code>. Note that the pointer must be cast to a void pointer using <cite>cython’s</cite> <code class="code docutils literal notranslate"><span class="pre">PyLong_AsVoidPtr</span></code> funtion; using <cite>python’s</cite> <code class="code docutils literal notranslate"><span class="pre">PyLong_AsVoidPtr</span></code> function will allocate memory incorrectly.</p>
</section>
<section id="c-script">
<h2>C++ Script<a class="headerlink" href="#c-script" title="Link to this heading">¶</a></h2>
<p>A copy of the graph may be made in your C++ script with</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">igraph_t</span><span class="o">*</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">igraph_t</span><span class="o">*</span><span class="p">)</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">G_ptr</span>
</pre></div>
</div>
<p>Results from subsequent computations may be passed back to python via attributes of the <code class="code docutils literal notranslate"><span class="pre">c_cast</span></code> instance. These steps follow conventional cython usage and are documented in the <a class="reference external" href="https://cython.org/">cython</a> documentation. This includes creating the necessary header files and adding the module to <code class="code docutils literal notranslate"><span class="pre">setup.py</span></code>. Details for the use of <strong>igraph</strong> in your C++ script can be found at the <a class="reference external" href="https://igraph.org/c/pdf/latest/igraph-docs.pdf">igraph C</a> documentation.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">StructuralGT</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted/quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted/examples.html">Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../networks/networks.html">Networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../networks/physical_networks.html">Physical networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../networks/interaction_networks.html">Interaction Networks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Adding C++ Scripts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#python-wrapper-method">Python Wrapper Method</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cython-module">Cython Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#c-script">C++ Script</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cite.html">How to cite StructuralGT</a></li>
<li class="toctree-l1"><a class="reference internal" href="zreferences.html">References</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../networks/interaction_networks.html" title="previous chapter">Interaction Networks</a></li>
      <li>Next: <a href="cite.html" title="next chapter">How to cite StructuralGT</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, Reagents of the University of Michigan.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../_sources/reference/addingcppscripts.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>